---
# Connection via AWS SSM + S3 payload bucket
ansible_connection: amazon.aws.aws_ssm
ansible_aws_ssm_bucket_name: "{{ project }}-artifacts"
ansible_aws_ssm_bucket_prefix: "ansible-ssm"
ansible_aws_ssm_region: "{{ region | default('eu-central-1') }}"

# Safer privilege escalation over SSM (no TTY/password prompts)
ansible_become: true
ansible_become_method: sudo
ansible_become_flags: "-n -E"

# Stable shell and temp dir to avoid /tmp pressure
ansible_shell_type: sh
ansible_shell_executable: /bin/sh
ansible_remote_tmp: "/var/tmp/ansible-{{ ansible_user | default('ssm-user') }}"

# Allow longer SSM commands
ansible_command_timeout: 1800
